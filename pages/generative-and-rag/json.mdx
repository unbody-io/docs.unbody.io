import Collapse from '@/components/Collapse'
import { Tabs } from "nextra/components"


# JSON Generation

Generate structured JSON content based on prompts, messages, or schemas. Useful for creating API responses, structured records, or documents.

## Basic JSON Generation
Let's say you need to collect user information as structured data like name, age and address. This example shows how to generate JSON that matches your requirements.

```typescript
const {
    data: { payload },
}   = await unbody.generate
        .json("Provide user details:", {
            schema: {
                type: "object",
                properties: {
                    name: { type: "string" },
                    age: { type: "number" },
                    address: { type: "string" },
                },
            },
        });
```

<Collapse title="Response">
```typescript

{
    "content": {
        "name": "Jane Doe",
        "age": 28
    },
    "metadata": {
        "usage": {
            "inputTokens": 61,
            "outputTokens": 11,
            "totalTokens": 72
        }
    }
}
```
</Collapse>

## Generation with Zod Schema
Are you familiar with the Zod validation library? You can also use Zod to define the output structure while providing full-type safety.

```typescript
import { z } from "zod";

const {
    data: { payload },
}   = await unbody.generate
        .json("Provide user details:", {
            schema: z.object({
                name: z.string(),
                age: z.number(),
            }),
        });
```

<Collapse title="Response">
```typescript

{
    "content": {
        "name": "Jane Doe",
        "age": 28
    },
    "metadata": {
        "usage": {
            "inputTokens": 61,
            "outputTokens": 11,
            "totalTokens": 72
        }
    }
}
```
</Collapse>

## Multi-Message Generation
Want to create structured data through natural conversation? This approach combines chat-like interactions with strict output formatting to generate precise JSON responses.

```typescript
import { z } from "zod";

const {
    data: { payload },
}  = await unbody.generate
    .json(
        [
            {
                role: "user",
                content: "What is the structure of a business entity?",
            },
            { 
                role: "system", 
                content: "Explain in detail with examples." 
            },
        ],
        {
            schema: z.object({
                companyName: z.string(),
                employees: z.number(),
                headquarters: z.string(),
            }),
        }
    );
```
<Collapse title="Response">
```typescript

{
    "content": {
        "companyName": "Meta Corp",
        "employees": 8500,
        "headquarters": "California"
    },
    "metadata": {
        "usage": {
            "inputTokens": 85,
            "outputTokens": 18,
            "totalTokens": 103
        }
    }
}
```
</Collapse>

Learn more about advanced JSON generation features in our [JSON Generation API Guide](/generative-api/json-gen).