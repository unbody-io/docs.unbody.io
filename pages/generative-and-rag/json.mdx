import Collapse from '@/components/Collapse'
import { Tabs } from "nextra/components"


# JSON Generation

Generate structured JSON content based on prompts, messages, or schemas. Useful for creating API responses, structured records, or documents.

## Basic JSON Generation
Shows how to generate structured JSON data with a simple schema definition. The `.generate.json()` method allows you to specify the expected output structure using JSON Schema format, ensuring the response matches your requirements.

```typescript
const {
    data: { payload },
}   = await unbody.generate
        .json("Provide user details:", {
            schema: {
                type: "object",
                properties: {
                    name: { type: "string" },
                    age: { type: "number" },
                    address: { type: "string" },
                },
            },
        });
```

<Collapse title="Response">
```typescript

{
    "content": {
        "name": "Jane Doe",
        "age": 28
    },
    "metadata": {
        "usage": {
            "inputTokens": 61,
            "outputTokens": 11,
            "totalTokens": 72
        }
    }
}
```
</Collapse>

## Generation with Zod Schema
Demonstrates JSON generation with type validation using [Zod](https://zod.dev/), a TypeScript-first validation library that ensures your generated JSON matches the expected structure. Note: Zod must be installed in your project.

```typescript
import { z } from "zod";

const {
    data: { payload },
}   = await unbody.generate
        .json("Provide user details:", {
            schema: z.object({
                name: z.string(),
                age: z.number(),
            }),
        });
```

<Collapse title="Response">
```typescript

{
    "content": {
        "name": "Jane Doe",
        "age": 28
    },
    "metadata": {
        "usage": {
            "inputTokens": 61,
            "outputTokens": 11,
            "totalTokens": 72
        }
    }
}
```
</Collapse>

## Multi-Message Generation
Shows how to generate JSON using conversational context and Zod schemas.

```typescript
import { z } from "zod";

const {
    data: { payload },
}  = await unbody.generate
    .json(
        [
            {
                role: "user",
                content: "What is the structure of a business entity?",
            },
            { 
                role: "system", 
                content: "Explain in detail with examples." 
            },
        ],
        {
            schema: z.object({
                companyName: z.string(),
                employees: z.number(),
                headquarters: z.string(),
            }),
        }
    );
```
<Collapse title="Response">
```typescript

{
    "content": {
        "companyName": "Meta Corp",
        "employees": 8500,
        "headquarters": "California"
    },
    "metadata": {
        "usage": {
            "inputTokens": 85,
            "outputTokens": 18,
            "totalTokens": 103
        }
    }
}
```
</Collapse>

Learn more about advanced JSON generation features in our [JSON Generation API Guide](/generative-api/json-gen).